FROM debian:bullseye

# 📦 Installation des outils nécessaires
RUN apt update && apt install -y bash coreutils net-tools iputils-ping

# 📁 Ajout des scripts
COPY start.sh /root/start.sh
COPY gsh /usr/local/bin/gsh

# 📄 Ajout des fichiers du scénario Malware
COPY process_list.txt /opt/malware/process_list.txt
COPY suspicious_file.py /opt/malware/suspicious_file.py
COPY network_logs.txt /opt/malware/network_logs.txt
COPY exfiltration_attempt.log /opt/malware/exfiltration_attempt.log
COPY summary.txt /opt/malware/summary.txt

# 🔐 Permissions d'exécution
RUN chmod +x /root/start.sh /usr/local/bin/gsh

# 📂 Répertoire de travail
WORKDIR /root

# ▶️ Commande de démarrage : copie en /tmp + lancement
CMD cp /opt/malware/* /tmp/ && bash /root/start.sh
